{% extends "history_base.html" %}
{% load staticfiles %}

{% block custom-head %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/leaflet.css' %}" />
    <style type="text/css">
        #map { height: 600px; width: 100%; border: 1px solid #fff; margin-bottom: 12px; }
        #map .card-content, .chart-container .card-content { padding: 5px 10px; }
        #map .card-content strong { font-weight: bold; }
        #map span.legend-item { width: 30px; height: 15px; float: left; margin-right: 10px; border: 1px solid #777; text-align: center; }

        .leaflet-tooltip { background: transparent; border-color: transparent; box-shadow: none; }
        .leaflet-tooltip-right:before { border-right-color: transparent; }
        .badge h5 { margin: 0; }
        .collection-item.avatar { padding-left: 20px !important; min-height: 70px !important; }

        chart1,chart2 { height: 250px; width: 100%; }
        .bar { fill: #ff7f0e; }
        .bar2 { fill: #2ca02c; }
        /*.bar2:hover { fill: #98df8a; }*/

        .chart-container .card-content { text-align: center; }
        /*#ddd*/
    </style>
{% endblock %}

{% block content-title %}Economic - Profitability{% endblock %}

{% block content-body %}
    <div class="content-box" style="padding: 20px 15px 0px;">
      <div class="row">
        <div class="input-field col s12 m12 l8">
          <select id="cbPeriod">
          {% for period_text in period %}
            {% if period_text == '' %}
            <option value='' disabled selected>Select period</option>
            {% elif period_text == selected_period %}
            <option value='{{ period_text }}' selected>{{ period_text }}</option>
            {% else %}
            <option value='{{ period_text }}'>{{ period_text }}</option>
            {% endif %}
          {% endfor %}
          </select>
          <label>Period</label>
        </div>
        <div class="input-field col s12 m12 l4 center-align">
          <a id="btnShow" class="waves-effect waves-light btn">Show</a>
        </div>
      </div>
    </div>

    <div class="content-box">
      <div class="row content-heading">
        Emission from Peat Decomposition
      </div>

      <div class="row">
        <div class="col s12 m12 l10 = offset-l1">
          <div id="map"></div>
        </div>
      </div>
    </div>
    
{% endblock %}

{% block custom-footer %}
<script src="{% static 'js/leaflet.js' %}"></script>

<script type="text/javascript">
  $(document).ready(function() {
    $('select').material_select();
  });

  $("#btnShow").on( "click", function() {
    var txtPeriod = $("#cbPeriod").val();

    if (txtPeriod != "") {
      var url = "/history/economic-profitability/" + txtPeriod ;
      //alert(url);
      location.href = url;
    }
    else 
      alert("Please select a commodity and/or a period");
  });
</script>

{% endblock %}
