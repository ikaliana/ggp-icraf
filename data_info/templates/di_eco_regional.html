{% extends "di_base.html" %} {% load staticfiles%} {% block custom-head %} {{ block.super }}
<style type="text/css">
        .chart-container .card-content { padding: 5px 10px; }
        chart1 { height: 100%; width: 100%; }
        #chart1 { padding-top: 15px; }
        svg { border: 2px solid #e0e0e0; }
        table.compact td,th { padding: 5px; }
        table.compact tr { border-bottom: 1px solid #fff; }
        table.compact td { font-size: 14px; }
        .bar { fill: #ff7f0e; }
         .fixed_cols {            
            padding: 15px 7px;
        }
        /*
        div.dataTables_scrollBody table{
            left: -26px !important;
        }
        */
    </style>
{% endblock %} {% block content-title %} {% if LANGUAGE_CODE == "en" %} Indicator economic regional {% else %} Indikator
ekonomi regional {% endif %} {% endblock %} {% block content-body %}
<p>Pellentesque pede. Donec pulvinar ullamcorper metus. In eu odio at lectus pulvinar mollis. Vestibulum sem magna, elementum
    ut, vestibulum eu, facilisis quis, arcu. Mauris a dolor. Nulla facilisi. Cum sociis natoque penatibus et magnis dis parturient
    montes, nascetur ridiculus mus. Sed blandit. Phasellus pellentesque, ante nec iaculis dapibus, eros justo auctor lectus,
    a lobortis lorem mauris quis nunc. Praesent pellentesque facilisis elit. Class aptent taciti sociosqu ad litora torquent
    per conubia nostra, per inceptos hymenaeos. In hac habitasse platea dictumst. Nullam id ante eget dui vulputate aliquam.
    Pellentesque erat erat, tincidunt in, eleifend accumsan, malesuada eget, augue. Suspendisse sit amet tellus in eros bibendum
    condimentum. Vestibulum suscipit volutpat nulla. Maecenas pede nisl, elementum eu, ornare ac, malesuada at, erat. Proin
    gravida orci porttitor enim accumsan lacinia. Donec condimentum, urna non molestie semper, ligula enim ornare nibh, quis
    laoreet eros quam eget ante. Aliquam libero. Vivamus nisl nibh, iaculis vitae, viverra sit amet, ullamcorper vitae, turpis.
    Aliquam erat volutpat. Vestibulum dui sem, pulvinar sed, imperdiet nec, iaculis nec, leo. Fusce odio. Etiam arcu dui,
    faucibus eget, placerat vel, sodales eget, orci. Donec ornare neque ac sem. Mauris aliquet. Aliquam sem leo, vulputate
    sed, convallis at, ultricies quis, justo. Donec nonummy magna quis risus. Quisque eleifend. Phasellus tempor vehicula
    justo. Aliquam lacinia metus ut elit. Pellentesque pede. Donec pulvinar ullamcorper metus. In eu odio at lectus pulvinar
    mollis.</p>
<div class="content-box" style="padding: 20px 15px 0px;">
<div class="row">
    <div class="input-field col s12 m12 l8">
        <select id="cbPeriod">        
            <option value='' disabled selected>{% if LANGUAGE_CODE == "en" %}Select period{% else %}Pilih periode{% endif %}</option>        
            <option value='2000'>2000</option>        
            <option value='2005'>2005</option>
            <option value='2010'>2010</option>
            <option value='2015'>2015</option>
        
          </select>
        <label>{% if LANGUAGE_CODE == "en" %}Period{% else %}Periode{% endif %}</label>
    </div>
    <div class="input-field col s12 m12 l4 center-align">
        <a id="btnShow" class="waves-effect waves-light btn">{% if LANGUAGE_CODE == "en" %}Show{% else %}Tampilkan{% endif %}</a>
    </div>
</div>
</div>
<div class="content-box" style="padding: 20px 15px 0px;min-height: 550px;" >
<div class="row">
    <table1plan>

</div>

</div>
{% endblock %} {% block custom-footer %}
<script src="{% static 'js/d3.min.js' %}"></script>
<script src="{% static 'js/history/d3table.js' %}"></script>
<script src="{% static 'js/jquery.dataTables.min.js'  %}"></script>
<script src="{% static 'js/dataTables.fixedColumns.min.js'  %}"></script>
<script src="{% static 'js/dataTables.scroller.min.js'  %}"></script>
<script src="{% static 'js/lodash.core.js'  %}"></script>
<script src="{% static 'js/dataTables.material.min.js'  %}"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('select').material_select();
    });
    function RepairData2(d) {
        return {
            id: d[""],
            "Sektor": d["1"],
            "Kode I-O": d["0"],
            "1": Math.round(d["2"] * 100) / 100,
            "2": Math.round(d["3"] * 100) / 100,
            "3": Math.round(d["4"] * 100) / 100,
            "4": Math.round(d["5"] * 100) / 100,
            "5": Math.round(d["6"] * 100) / 100,
            "6": Math.round(d["7"] * 100) / 100,
            "7": Math.round(d["8"] * 100) / 100,
            "8": Math.round(d["9"] * 100) / 100,
            "9": Math.round(d["10"] * 100) / 100,
            "10":  Math.round(d["11"] * 100) / 100,
            "11":  Math.round(d["12"] * 100) / 100,
            "12":  Math.round(d["13"] * 100) / 100,
            "13":  Math.round(d["14"] * 100) / 100,
            "14":  Math.round(d["15"] * 100) / 100,
            "15":  Math.round(d["16"] * 100) / 100,
            "16":  Math.round(d["17"] * 100) / 100,
            "17":  Math.round(d["18"] * 100) / 100,
            "18":  Math.round(d["19"] * 100) / 100,
            "19":  Math.round(d["20"] * 100) / 100,
            "20":  Math.round(d["21"] * 100) / 100,
            "21":  Math.round(d["22"] * 100) / 100,
            "22":  Math.round(d["23"] * 100) / 100,
            "23":  Math.round(d["24"] * 100) / 100,
            "24":  Math.round(d["25"] * 100) / 100,
            "25":  Math.round(d["26"] * 100) / 100,
            "26":  Math.round(d["27"] * 100) / 100,
            "27":  Math.round(d["28"] * 100) / 100,
            "28":  Math.round(d["29"] * 100) / 100,
            "29":  Math.round(d["30"] * 100) / 100,
            "30":  Math.round(d["31"] * 100) / 100,
            "31":  Math.round(d["32"] * 100) / 100,
            "32":  Math.round(d["33"] * 100) / 100,
            "33":  Math.round(d["34"] * 100) / 100,
            "34":  Math.round(d["35"] * 100) / 100,
            "35":  Math.round(d["36"] * 100) / 100,
            "180": Math.round(d["37"] * 100) / 100,

        }
    }

    function RepairData(d) {

        return {
            id: d[""],
            "Sektor": d["Sektor"],
            "Kode I-O": d["Kode I-O"],
            "1": Math.round(d["1"] * 100) / 100,
            "2": Math.round(d["2"] * 100) / 100,
            "3": Math.round(d["3"] * 100) / 100,
            "4": Math.round(d["4"] * 100) / 100,
            "5": Math.round(d["5"] * 100) / 100,
            "6": Math.round(d["6"] * 100) / 100,
            "7": Math.round(d["7"] * 100) / 100,
            "8": Math.round(d["8"] * 100) / 100,
            "9": Math.round(d["9"] * 100) / 100,
            "10": Math.round(d["10"] * 100) / 100,
            "11": Math.round(d["11"] * 100) / 100,
            "12": Math.round(d["12"] * 100) / 100,
            "13": Math.round(d["13"] * 100) / 100,
            "14": Math.round(d["14"] * 100) / 100,
            "15": Math.round(d["15"] * 100) / 100,
            "16": Math.round(d["16"] * 100) / 100,
            "17": Math.round(d["17"] * 100) / 100,
            "18": Math.round(d["18"] * 100) / 100,
            "19": Math.round(d["19"] * 100) / 100,
            "20": Math.round(d["20"] * 100) / 100,
            "21": Math.round(d["21"] * 100) / 100,
            "22": Math.round(d["22"] * 100) / 100,
            "23": Math.round(d["23"] * 100) / 100,
            "24": Math.round(d["24"] * 100) / 100,
            "25": Math.round(d["25"] * 100) / 100,
            "26": Math.round(d["26"] * 100) / 100,
            "27": Math.round(d["27"] * 100) / 100,
            "28": Math.round(d["28"] * 100) / 100,
            "29": Math.round(d["29"] * 100) / 100,
            "30": Math.round(d["30"] * 100) / 100,
            "31": Math.round(d["31"] * 100) / 100,
            "32": Math.round(d["32"] * 100) / 100,
            "33": Math.round(d["33"] * 100) / 100,
            "34": Math.round(d["34"] * 100) / 100,
            "35": Math.round(d["35"] * 100) / 100,
            "180": Math.round(d["180"] * 100) / 100,
            "302": Math.round(d["302"] * 100) / 100,
            "303": Math.round(d["303"] * 100) / 100,
            "304": Math.round(d["304"] * 100) / 100,
            "305": Math.round(d["305"] * 100) / 100,
            "309": Math.round(d["309"] * 100) / 100,
            "310": Math.round(d["310"] * 100) / 100,
            "409": Math.round(d["409"] * 100) / 100,
            "509": Math.round(d["509"] * 100) / 100,
            "600": Math.round(d["600"] * 100) / 100,
            "700": Math.round(d["700"] * 100) / 100,
        }

    }
    var path = "{% static 'data/csv/' %}";
    var language = "{{ LANGUAGE_CODE }}";

    {% if LANGUAGE_CODE == "en" %}
    var table_header = [ "Kode I-O","Sektor",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19",
        "20",
        "21",
        "22",
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "30",
        "31",
        "32",
        "33",
        "34",
        "35",
        "180",
        "302",
        "303",
        "304",
        "305",
        "309",
        "310",
        "409",
        "509",
        "600",
        "700",
    ];
    {% else %}
    var table_header = ["Kode I-O","Sektor", 
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19",
        "20",
        "21",
        "22",
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "30",
        "31",
        "32",
        "33",
        "34",
        "35",
        "180",
        "302",
        "303",
        "304",
        "305",
        "309",
        "310",
        "409",
        "509",
        "600",
        "700",
    ];

    {% endif %}

    var column_key1 = [
        "Kode I-O", "Sektor",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19",
        "20",
        "21",
        "22",
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "30",
        "31",
        "32",
        "33",
        "34",
        "35",
        "180",
        "302",
        "303",
        "304",
        "305",
        "309",
        "310",
        "409",
        "509",
        "600",
        "700",
    ];

    var table_class = "compact responsive-table bordered striped centered";
    var header_class = "yellow darken-2";



    $('#btnShow').on('click', function (e) {
        e.preventDefault();
        var year = $('#cbPeriod').val();
        if (year != null && year != undefined) {
            var data = [];
            d3.queue()
                .defer(d3.csv, path + "datainfo_economy_regional_" + year + "_PermintaanAntara" + ".csv")
                .defer(d3.csv, path + "datainfo_economy_regional_" + year + "_PermintaanAkhir" + ".csv")
                .defer(d3.text, path + "datainfo_economy_regional_" + year + "_InputAntara" + ".csv")
                .await(function (error, a, b, c) {
                    c = d3.csvParseRows(c);
                    var d = {};
                    $.each(a, function (i) {
                        d = Object.assign(this, b[i]);
                        data.push(RepairData(d));
                    });


                    $.each(c, function (i) {
                        data.push(RepairData2(_.extend({}, c[i])));
                    })
                    $('#table1').remove();
                     $('table1plan').empty();
                    GenerateTableD3("table1plan", data, table_header, column_key1, table_class, header_class, "table1");

                    var oTable = {};

                     
                    oTable = $('#table1').DataTable({
                        "dom": "lfrti",
                        scrollY: "400px",
                        scrollX: true,
                        scrollCollapse: true,
                        scroller: true,
                        fixedColumns: {
                            leftColumns: 1,
                        },
                        info: false,
                        searching: false,
                        ordering: false,
                        lengthChange: false,
                        columnDefs: [{
                            width: "155px",
                            targets: 0,
                            className: 'yellow darken-2 fixed_cols'
                        }]
                    });
                });


        }
    })
</script>
{% endblock %}